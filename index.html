<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>T-shirt Selection with Feedback</title>
    <style>
      /* General reset and mobile-friendly adjustments */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Helvetica Neue", sans-serif;
        background-color: #f4f4f4;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: #333;
        flex-direction: column;
      }

      .form-container {
        background-color: #fff;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        text-align: center;
        position: relative;
        max-width: 400px;
        width: 100%;
      }

      h1 {
        margin-bottom: 15px;
        font-size: 1.5em;
        color: #000;
      }

      .tshirt-carousel {
        display: flex;
        justify-content: center;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .tshirt {
        display: none;
        transition: opacity 0.3s ease-in-out;
      }

      .tshirt.active {
        display: block;
        opacity: 1;
      }

      .tshirt img {
        width: 100%;
        max-width: 250px;
        height: auto;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .swipe-buttons {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        padding: 0 10px;
      }

      .swipe-buttons button {
        padding: 12px 20px;
        cursor: pointer;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        transition: background-color 0.3s ease;
      }

      .swipe-buttons button:hover {
        background-color: #0056b3;
      }

      #price-options {
        display: none;
        background-color: rgba(0, 0, 0, 0.75);
        color: white;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      #price-options button {
        padding: 10px 25px;
        margin: 10px;
        cursor: pointer;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        transition: background-color 0.3s ease;
      }

      #price-options button:hover {
        background-color: #218838;
      }

      #price-options label {
        font-weight: 600;
        padding: 10px;
        background-color: rgba(54, 54, 54, 0.5);
        border-radius: 10px;
      }

      #feedback-form {
        display: none;
        margin-top: 20px;
      }

      #feedback-form textarea {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ddd;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      #feedback-form label {
        font-weight: bold;
      }

      button#submit-feedback {
        padding: 10px 20px;
        font-size: 14px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        opacity: 0.5; /* Initially disabled */
        pointer-events: none; /* Initially disabled */
      }

      .thank-you-message {
        display: none;
        font-size: 1.2rem;
        font-weight: bold;
        margin-top: 20px;
        color: green;
      }

      .gender-container {
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="form-container" id="carousel-container">
      <h1>Outrage T-shirt</h1>

      <!-- T-shirt Image Carousel -->
      <div class="tshirt-carousel">
        <div class="tshirt active" id="tshirt1">
          <img src="T1.webp" alt="T-shirt 1" />
        </div>
        <div class="tshirt" id="tshirt2">
          <img src="T2.webp" alt="T-shirt 2" />
        </div>
        <div class="tshirt" id="tshirt3">
          <img src="T3.webp" alt="T-shirt 3" />
        </div>
        <div class="tshirt" id="tshirt4">
          <img src="T4.webp" alt="T-shirt 4" />
        </div>
        <div class="tshirt" id="tshirt5">
          <img src="T5.webp" alt="T-shirt 1" />
        </div>
        <div class="tshirt" id="tshirt6">
          <img src="T6.webp" alt="T-shirt 2" />
        </div>
        <div class="tshirt" id="tshirt7">
          <img src="T7.jpg" alt="T-shirt 3" />
        </div>
        <div class="tshirt" id="tshirt8">
          <img src="T8.webp" alt="T-shirt 4" />
        </div>
        <div class="tshirt" id="tshirt9">
          <img src="T9.webp" alt="T-shirt 1" />
        </div>
        <div class="tshirt" id="tshirt10">
          <img src="T10.webp" alt="T-shirt 2" />
        </div>
        <div class="tshirt" id="tshirt11">
          <img src="T11.webp" alt="T-shirt 3" />
        </div>
        <div class="tshirt" id="tshirt12">
          <img src="T12.webp" alt="T-shirt 4" />
        </div>
        <div class="tshirt" id="tshirt13">
          <img src="T13.webp" alt="T-shirt 1" />
        </div>
        <div class="tshirt" id="tshirt14">
          <img src="T14.webp" alt="T-shirt 1" />
        </div>
        <div class="tshirt" id="tshirt15">
          <img src="T15.webp" alt="T-shirt 2" />
        </div>
        <div class="tshirt" id="tshirt16">
          <img src="T16.webp" alt="T-shirt 3" />
        </div>
        <div class="tshirt" id="tshirt17">
          <img src="T17.jpg" alt="T-shirt 4" />
        </div>
        <div class="tshirt" id="tshirt18">
          <img src="T18.webp" alt="T-shirt 1" />
        </div>
        <div class="tshirt" id="tshirt19">
          <img src="T19.webp" alt="T-shirt 2" />
        </div>
        <div class="tshirt" id="tshirt20">
          <img src="T20.webp" alt="T-shirt 3" />
        </div>
      </div>

      <!-- Swipe Buttons -->
      <div class="swipe-buttons">
        <button id="swipe-left">Swipe Left (No)</button>
        <button id="swipe-right">Swipe Right (Yes)</button>
      </div>

      <!-- Price and Decision Options -->
      <div id="price-options">
        <label>Would you buy this at 500-600 Rupees?</label>
        <button class="decision-button" data-decision="Definitely Yes">
          Definitely Yes
        </button>
        <button class="decision-button" data-decision="Not Worth It">
          Not Worth It
        </button>
        <button class="decision-button" data-decision="Cheaper Would Be Good">
          Cheaper Would Be Good
        </button>
      </div>
    </div>

    <!-- Feedback Form 1 -->
    <!--  -->

    <div
      id="feedback-form"
      class="form-container"
      style="
        background: #f9f9f9;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        max-width: 500px;
        margin: auto;
        font-family: 'Arial', sans-serif;
      "
    >
      <h2
        style="
          color: #333;
          font-size: 24px;
          margin-bottom: 20px;
          text-align: center;
        "
      >
        I truly appreciate you sticking with me to this point ðŸ˜Š
      </h2>

      <!-- Name Input -->
      <label
        for="name"
        style="
          display: block;
          font-weight: 600;
          margin-bottom: 5px;
          text-align: left;
        "
        >Your Name:</label
      >
      <input
        type="text"
        id="name"
        placeholder="Enter your name"
        style="
          width: 100%;
          padding: 12px;
          border-radius: 8px;
          border: 1px solid #ddd;
          margin-bottom: 15px;
          font-size: 16px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        "
      />

      <!-- Gender Selection (Now in one line) -->
      <div
        class="gender-container"
        style="text-align: left; margin-bottom: 20px"
      >
        <label style="font-weight: 600; margin-bottom: 8px">Gender:</label
        ><br />
        <label style="margin-right: 15px">
          <input
            type="radio"
            id="male"
            name="gender"
            value="Male"
            onchange="checkInputs()"
            style="margin-right: 8px"
          />
          Male
        </label>
        <label>
          <input
            type="radio"
            id="female"
            name="gender"
            value="Female"
            onchange="checkInputs()"
            style="margin-right: 8px"
          />
          Female
        </label>
      </div>

      <!-- Feedback Section -->
      <label
        for="user-feedback"
        style="
          display: block;
          font-size: 14px;
          color: #666;
          margin-bottom: 5px;
          text-align: left;
        "
      >
        Share your thoughts on tshirt design and feel. (Optional)
      </label>
      <textarea
        id="user-feedback"
        rows="4"
        placeholder="Share your feedback"
        style="
          width: 100%;
          padding: 12px;
          border: 1px solid #ccc;
          border-radius: 8px;
          margin-bottom: 20px;
          font-size: 15px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
          resize: vertical;
        "
      ></textarea>

      <!-- Submit Button -->
      <button
        id="submit-feedback"
        style="
          background-color: #4caf50;
          color: white;
          padding: 12px 20px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          font-size: 16px;
          width: 100%;
          opacity: 0.5;
          transition: opacity 0.3s ease;
          pointer-events: none; /* Disabled state */
        "
        disabled
      >
        Submit Selections and Feedback
      </button>

      <!-- Thank You Message -->
      <div
        class="thank-you-message"
        id="thank-you"
        style="display: none; margin-top: 20px; color: #4caf50; font-size: 18px"
      >
        Thank you for your feedback and selections!
      </div>
    </div>

    <script>
      let currentTshirt = 0;
      const tshirts = document.querySelectorAll(".tshirt");
      const priceOptions = document.getElementById("price-options");
      const feedbackForm = document.getElementById("feedback-form");
      const carouselContainer = document.getElementById("carousel-container");
      const responses = []; // To store responses

      document.addEventListener("DOMContentLoaded", () => {
        showTshirt(currentTshirt); // Ensure first T-shirt is shown
        priceOptions.style.display = "none"; // Hide price options initially
      });

      function showTshirt(index) {
        tshirts.forEach((tshirt, i) => {
          tshirt.classList.toggle("active", i === index);
        });
      }

      function handleSwipe(direction) {
        if (direction === "right") {
          priceOptions.style.display = "flex"; // Show price options as an overlay
        } else {
          recordResponse(false, null);
          goToNextTshirt(); // Move to next item on "No"
        }
      }

      function recordResponse(isInterested, decision) {
        const currentTshirtId = currentTshirt + 1;
        responses.push({
          tshirt: `T${currentTshirtId}.webp`,
          interested: isInterested,
          decision: decision,
        });
      }

      function goToNextTshirt() {
        priceOptions.style.display = "none"; // Hide price options
        currentTshirt++;
        if (currentTshirt < tshirts.length) {
          showTshirt(currentTshirt);
        } else {
          carouselContainer.style.display = "none"; // Hide carousel when done
          feedbackForm.style.display = "block"; // Show feedback form
        }
      }

      document.getElementById("swipe-left").addEventListener("click", () => {
        handleSwipe("left");
      });

      document.getElementById("swipe-right").addEventListener("click", () => {
        handleSwipe("right");
      });

      document.querySelectorAll(".decision-button").forEach((button) => {
        button.addEventListener("click", (event) => {
          const decision = event.target.getAttribute("data-decision");
          recordResponse(true, decision);
          goToNextTshirt(); // Move to the next T-shirt after decision
        });
      });

      document
        .getElementById("submit-feedback")
        .addEventListener("click", () => {
          const userFeedback = document.getElementById("user-feedback").value;
          const name = document.getElementById("name").value;
          const gender = document.querySelector('input[name="gender"]:checked');

          // Log the data to console
          // console.log({
          //   selections: responses,
          //   feedback: userFeedback,
          //   name: name,
          //   gender: gender ? gender.value : "Not specified",
          // });

          const data = {
            selections: responses,
            name: name,
            gender: gender ? gender.value : "Not specified",
            feedback: userFeedback,
          };

          fetch(
            "https://dynamic-croquembouche-427cf3.netlify.app/.netlify/functions/feedback4tee",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json",
              },
              body: JSON.stringify(data),
            }
          )
            .then((response) => response.json())
            .then((data) => {
              // console.log("Success:", data);
              alert('Form has been submitted successfully, Thankyou.')
            })
            .catch((error) => {
              console.error("Error:", error);
              alert('Something went wrong, try again later....');
            });
          // Show thank you message
          document.getElementById("thank-you").style.display = "block";
          feedbackForm.style.display = "none"; // Hide feedback form after submission
        });

      function checkInputs() {
        const name = document.getElementById("name").value;
        const gender = document.querySelector('input[name="gender"]:checked');
        const submitButton = document.getElementById("submit-feedback");

        if (name && gender) {
          submitButton.disabled = false;
          submitButton.style.opacity = 1; // Make button fully visible
          submitButton.style.pointerEvents = "auto"; // Enable pointer events
        } else {
          submitButton.disabled = true;
          submitButton.style.opacity = 0.5; // Dim the button
          submitButton.style.pointerEvents = "none"; // Disable pointer events
        }
      }

      // Event listeners for input changes
      document.getElementById("name").addEventListener("input", checkInputs);
    </script>
  </body>
</html>
